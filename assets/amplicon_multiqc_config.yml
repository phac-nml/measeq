# Top page info
title: "Amplicon Summary MultiQC Report"
intro_text: >
  Report summarizing overall amplicon info to inform how sequencing went for each amplicon
report_comment: >
  This report has been generated by the <a href="https://github.com/phac-nml/measeq/releases/tag/0.2.0" target="_blank">phac-nml/measeq</a>
  analysis pipeline.
show_analysis_paths: False
# Modules/tools supported that we only want to grab
run_modules:
  - custom_content

### Custom data here ###
custom_data:
  # Amplicons section
  amplicon_depth:
    parent_id: amplicons_qc
    parent_name: "Amplicon Summary"
    parent_description: >
      Different amplicon plots to show how deep each amplicon is sequenced, how complete each amplicon is,
      and the relative sequencing depth of each sample's amplicon in the run compared to each other
    id: "amplicon_depth"
    file_format: "tsv"
    section_name: "Sample Amplicon Depth"
    description: >
      Calculated from the primertrimmed sorted bam file using bedtools coverage
      looking for reads that overlap 90% of the given amplicon region
    plot_type: "linegraph"
    pconfig:
      id: "amplicon_depth"
      title: "Sample Amplicon Depth"
      xlab: "Amplicon ID"
      ylab: "Read Depth"
      logswitch: True
      logswitch_active: True
      categories: True
      ymin: 0
      extra_series:
        name: "Depth Threshold"
        dash: "dash"
        color: "#fc033d"
  amplicon_completeness_heatmap:
    parent_id: amplicons_qc
    file_format: "tsv"
    section_name: "Amplicon Completeness"
    description: >
      Heatmap showing how complete each amplicon is based on the consensus sequence.
      Amplicon completeness is calculated using the number of Ns in the amplicon compared to the amplicon length.
      A 1.0 means the amplicon is fully sequenced while a 0 means that there were no bases called in it.
      Note that as amplicons overlap, a fully dropped amplicon likely will have some completeness from its two neighbours
    id: "amplicon_completeness_heatmap"
    plot_type: "heatmap"
    pconfig:
      id: "amplicon_completeness_heatmap"
      title: "Amplicon Completeness"
      xlab: "Amplicon ID"
      xcats_samples: False
      ycats_samples: True
      square: False
      min: 0
      max: 1
      colstops:
        [
          [0, "#a50026"],
          [0.1, "#d73027"],
          [0.2, "#f46d43"],
          [0.3, "#fdae61"],
          [0.4, "#fee08b"],
          [0.5, "#ffffbf"],
          [0.6, "#d9ef8b"],
          [0.7, "#a6d96a"],
          [0.8, "#66bd63"],
          [0.9, "#1a9850"],
          [1, "#006837"],
        ]
  amplicon_depth_heatmap:
    parent_id: amplicons_qc
    file_format: "tsv"
    section_name: "Log10 Amplicon Depth"
    description: >
      Calculated from the primertrimmed sorted bam file using bedtools coverage looking for reads that overlap
      90% of the given amplicon region. The log10 of this value is then taken to allow a better comparison of
      the depth of each amplicon over all of the samples in the run. Taking the log10 of each helps account
      for samples with extreme depth variations. Amplicons with no depth are marked as 0
    id: "amplicon_depth_heatmap"
    plot_type: "heatmap"
    pconfig:
      id: "amplicon_depth_heatmap"
      title: "Log10 Amplicon Depth"
      xlab: "Amplicon ID"
      xcats_samples: False
      ycats_samples: True
      square: False
      min: 0
      max: 5
      colstops:
        [
          [0, "#a50026"],
          [0.10, "#d73027"],
          [0.15, "#f46d43"],
          [0.20, "#fdae61"],
          [0.25, "#fee08b"],
          [0.30, "#ffffbf"],
          [0.35, "#d9ef8b"],
          [0.40, "#a6d96a"],
          [0.60, "#66bd63"],
          [0.80, "#1a9850"],
          [1, "#006837"],
        ]

# Search paths for specific modules
sp:
  amplicon_depth:
    fn: "*_amplicon_depth.tsv"

export_plots: true

disable_version_detection: true
